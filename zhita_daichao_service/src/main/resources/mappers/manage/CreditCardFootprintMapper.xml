<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhita.dao.manage.CreditCardFootprintMapper">
	<resultMap id="BaseResultMap"
		type="com.zhita.model.manage.CreditCardFootprint">
		<constructor>
			<idArg column="id" javaType="java.lang.Integer"
				jdbcType="INTEGER" />
			<arg column="userId" javaType="java.lang.Integer"
				jdbcType="INTEGER" />
			<arg column="footprint" javaType="java.lang.String"
				jdbcType="VARCHAR" />
			<arg column="footprintTime" javaType="java.lang.String"
				jdbcType="VARCHAR" />
			<arg column="deleted" javaType="java.lang.String"
				jdbcType="VARCHAR" />
			<arg column="company" javaType="java.lang.String"
				jdbcType="VARCHAR" />				
		</constructor>
	</resultMap>

	<!-- 后台管理   根据传过来的足迹名称，查询出足迹的个数 -->
	<select id="queryCount" parameterType="java.lang.String" resultType="java.lang.Integer">
		select count(DISTINCT f.userId) from credit_card_footprint f where footprint=#{arg0} and company=#{arg1} and deleted = 0
	</select>
	
	<!-- 小程序   查询出某个商品的申请人数 -->
	<select id="getApplications" resultType="long" parameterType="java.lang.String">
		select count(distinct userId) from credit_card_footprint where footprint= #{businessName} and deleted = 0 and company= #{company}
    </select>
    
    	<!-- 插入商品足迹 -->
	<insert id="insertfootprint"
		parameterType="java.util.Map">
		insert into credit_card_footprint (userId, footprint,
		footprintTime,company)
		values (#{userId,jdbcType=INTEGER},
		#{footprintName,jdbcType=VARCHAR},
		#{currentTimestamp,jdbcType=VARCHAR},
		#{company,jdbcType=VARCHAR})
	</insert>
	
</mapper>